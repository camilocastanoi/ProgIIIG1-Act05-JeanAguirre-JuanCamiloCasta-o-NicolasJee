% Árbol genealógico de los Simpson (Uso de listas)

% Lista de todas las personas en la familia
personas([abraham, herbert, homero, bart, clancy, mona, marge, lisa, maggie, patty, selma, jacqueline, ling]).

% Listas de género
hombres([abraham, herbert, homero, bart, clancy]).
mujeres([mona, marge, lisa, maggie, patty, selma, jacqueline, ling]).

% Relaciones padre-hijo y madre-hijo en listas
padres([
    [abraham, herbert], [abraham, homero],
    [clancy, marge], [clancy, patty], [clancy, selma],
    [homero, bart], [homero, lisa], [homero, maggie]
]).

madres([
    [mona, herbert], [mona, homero],
    [jacqueline, marge], [jacqueline, patty], [jacqueline, selma],
    [marge, bart], [marge, lisa], [marge, maggie],
    [selma, ling]
]).

% Relaciones de matrimonio usando listas
esposos([
    [homero, marge], [abraham, mona]
]).

% Predicados auxiliares para búsqueda en listas
buscar(_, [], false). % Si no está en la lista, devuelve falso
buscar(E, [[E, X] | _], X). % Encuentra la primera coincidencia
buscar(E, [_ | T], X) :- buscar(E, T, X). % Sigue buscando en la lista

% Reglas actualizadas para trabajar con listas

% Abuelo
abuelo(X, Y) :-
    padres(P), buscar(X, P, Z), % X es padre de Z
    padres(P2), buscar(Z, P2, Y), % Z es padre de Y
    X \= Y.

% Abuela
abuela(X, Y) :-
    madres(M), buscar(X, M, Z), % X es madre de Z
    (padre(Z, Y); madre(Z, Y)), % Z es padre o madre de Y
    X \= Y.

% Hermano
hermano(X, Y) :-
    padres(P), buscar(_, P, Hijos), % Encuentra a los hijos
    member(X, Hijos), member(Y, Hijos), X \= Y.

% Hermana
hermana(X, Y) :-
    padres(P), buscar(_, P, Hijos), % Encuentra a los hijos
    member(X, Hijos), member(Y, Hijos), X \= Y,
    mujeres(M), member(X, M).

% Tío
tio(X, Y) :-
    hermano(X, Z),
    padres(P), buscar(Z, P, Hijos), % Encuentra a los hijos
    member(Y, Hijos), X \= Y.

% Tía
tia(X, Y) :-
    hermana(X, Z),
    padres(P), buscar(Z, P, Hijos), % Encuentra a los hijos
    member(Y, Hijos), X \= Y.

% Primos
primos(X, Y) :-
    (tio(Z, X); tia(Z, X)),
    (tio(Z, Y); tia(Z, Y)),
    X \= Y.
